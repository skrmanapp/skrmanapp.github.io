<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0;" name="viewport" />
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title></title>
    <!-- Favicon -->
    <link rel="shortcut icon" type="image/icon" href="assets/images/favicon.ico"/>
    <!-- Font Awesome -->
    <link href="assets/css/font-awesome.min.css" rel="stylesheet">
    <!-- Bootstrap -->
    <link href="assets/css/bootstrap.min.css" rel="stylesheet">
    <!-- Slick slider -->
    <link href="assets/css/slick.css" rel="stylesheet">
    <!-- Theme color -->
    <link id="switcher" href="assets/css/theme-color/default-theme.css" rel="stylesheet">


    <!-- Main Style -->
    <link href="appstyle.css" rel="stylesheet">

    <!-- Fonts -->

    <!-- Open Sans for body and title font -->



    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
<body>





<!-- Start main content -->

<main role="main">

    <div class="container-fluid" style="padding-left: 0px;padding-right: 0px">


        <div class="row table-view">


            <!-- head -->
            <div class="col-xs-12 table-head " >
                <p class="col-xs-4 table-head-title">
                    基本资料
                </p>
            </div>
            <!-- head -->


            <!-- row -->
            <div class="  col-xs-12 table-row-m">

                <div class="col-xs-4">
                    <p class="row-title-m" >
                        头像
                    </p>
                </div>
                <div class="col-xs-4"></div>
                <div class="col-xs-4" style="  display: flex;justify-content: flex-end;">
                    <input id="fileSelector" type="file" style="filter:alpha(opacity=0);opacity:0;width: 0;height: 0;">
                    <img class="user-avatar" src="https://lazy-1252169987.cos.ap-guangzhou.myqcloud.com/default-avatar.png" alt="User Avatar" id="user-avatar-image">
                </div>
            </div>
            <div class="row-line col-xs-12"></div>
            <!-- row -->



            <!-- row -->

            <div class=" table-row-s col-xs-12">

                <div class="col-xs-4">
                    <p class="row-title-s" >
                        昵称
                    </p>
                </div>
                <div class="col-xs-4"></div>
                <div class="col-xs-4" style="  display: flex;justify-content: flex-end;">
                    <input id="nickName" name="nickName"  type="text" class="row-input" >
                </div>
            </div>
            <div class="row-line col-xs-12"></div>

            <!-- row -->




            <!-- row -->

            <div class=" table-row-s col-xs-12">

                <div class="col-xs-4">
                    <p class="row-title-s" >
                        性别
                    </p>
                </div>
                <div class="col-xs-4"></div>
                <div class="col-xs-4" style="  display: flex;justify-content: flex-end;">
                    <select name="select" id="sex" class="row-select">
                        <option value="equal">男</option>
                        <option value="like">女</option>
                    </select>
                    <i class="fa fa-angle-right fa-2x row-icon"></i>
                </div>
            </div>
            <div class="row-line col-xs-12" ></div>

            <!-- row -->

            <!-- row -->

            <div class=" table-row-s col-xs-12">

                <div class="col-xs-4">
                    <p class="row-title-s" >
                        手机号
                    </p>
                </div>
                <div class="col-xs-2"></div>
                <div class="col-xs-6" style="  display: flex;justify-content: flex-end;">
                    <p id="mobilePhone"   type="text" class="row-text" > </p>
                </div>
            </div>
            <div class="row-line col-xs-12"></div>

            <!-- row -->

            <!-- row -->

            <div class=" table-row-s col-xs-12">

                <div class="col-xs-4">
                    <p class="row-title-s" >
                        邮箱
                    </p>
                </div>
                <div class="col-xs-2"></div>
                <div class="col-xs-6" style="  display: flex;justify-content: flex-end;">
                    <p id="email"   type="text" class="row-text" > </p>
                </div>
            </div>
            <div class="row-line col-xs-12"></div>

            <!-- row -->

            <!-- head -->
            <div class="col-xs-12 table-head " >
                <p class="col-xs-4 table-head-title">
                    会员信息
                </p>
            </div>
            <!-- head -->




            <!-- row -->

            <div class=" table-row-s col-xs-12">

                <div class="col-xs-4">
                    <p class="row-title-s" >
                        会员信息
                    </p>
                </div>
                <div class="col-xs-2"></div>
                <div class="col-xs-6" style="  display: flex;justify-content: flex-end;font-size: 12px">
                    <p id="vip-level" name="vip-level"  type="text" class="row-text" > asdfasdfasdf</p>
                </div>
            </div>
            <div class="row-line col-xs-12"></div>

            <!-- row -->




            <!-- row -->

            <div class=" table-row-s col-xs-12" id="bind-wechat">

                <div class="col-xs-4">
                    <p class="row-title-s" >
                        绑定微信
                    </p>
                </div>
                <div class="col-xs-4"></div>
                <div class="col-xs-4" style="  display: flex;justify-content: flex-end;">
                    <p   type="text" class="row-text"> </p>
                    <i class="fa fa-angle-right fa-2x row-icon"></i>
                </div>
            </div>
            <div class="row-line col-xs-12" ></div>

            <!-- row -->




        </div>



    </div>




    </div>



    <!--<div class="row " style="margin-top: 50px">-->
    <!--<div class="col-xs-1"> </div>-->
    <!--<button id="add-button" type="button" class="col-xs-10 table-button">保存</button>-->
    <!--<div class="col-xs-1"> </div>-->
    <!--</div>-->


</main>

<!-- End main content -->




<!-- jQuery library -->
<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.js"></script>
<!-- tool library -->
<script src="assets/js/tool.js"></script>
<!-- Include all compiled plugins (below), or include individual files as needed -->
<!-- Bootstrap -->
<script src="assets/js/bootstrap.min.js"></script>




<script type="text/javascript">

    jQuery(document).ready(function($){


        var auth = "null";
        auth = UrlParm.parm("auth");


        console.log(auth)
        if(!auth || auth == 'null'){
            alert('进入参数错误！')
            return
        }


        function reloadForm() {
            //读取数据
            console.log('sss');
            $("#bind-wechat").hide();



            <!--==========================网络请求============================-->
            var requestData = {
                "auth":auth
            }
            var dataStr =  JSON.stringify(requestData)
            console.log(dataStr)
            $.ajax({
                type: "post", //提交方式
                url: request_url + '/UserInfoGet',//路径
                crossDomain: true,//跨域
                dataType: 'json',
                headers: {'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'},
                contentType: "application/x-www-form-urlencoded; charset=utf-8",
                data: dataStr,//数据，这里使用的是Json格式进行传输
                success: function (result) {//返回数据根据结果进行相应的处理
                    console.log('result');
                    console.log(result);
                    if (result.errcode == 0) {
                        $("#user-avatar-image").attr('src',result.result.Avatar);
                        $("#nickName").val(result.result.NickName)
                        $("#mobilePhone").html(result.result.MobilePhone)
                        $("#email").html(result.result.Email)
                        $("#vip-level").html(result.result.VipInfo)

                        if(result.reslut.Vip == "super"){
                            $("#bind-wechat").hide();
                        }else{
                            $("#bind-wechat").show();
                        }
                    } else {
                        alert(result.errmsg)
                    }

                },
                error: (err, type) => {


                },


            });
            <!--==========================网络请求============================-->

        }
        reloadForm();



        // });




        $("#user-avatar-image").click(function(){


            //
            // $("#fileSelector").val('');
            // $("#fileSelector").trigger("click");


        });

        $("#bind-wechat").click(function(){
            // 二次确认


            window.location.href = "bind-wechat.html?auth="+auth;


        });




// 头像预览
        $("#fileSelector").change(function (e) {


            // 获取上传文件对象
            console.log(e)
            // var file = e.target.files[0];
            // cos.putObject({
            //     Bucket: 'skrman-1256882866', /* 必须 */
            //     Region: 'ap-guangzhou',    /* 必须 */
            //     Key: '/avatar/picture.jpg',              /* 必须 */
            //     Body: 'hello!',
            // }, function(err, data) {
            //     console.log(err || data);
            // });
            // cos.putObject({
            //     Bucket: 'skrman-1256882866', /* 必须 */
            //     Region: 'ap-guangzhou',    /* 必须 */
            //     Key: 'avatar/aaaaa.png',              /* 必须 */
            //     StorageClass: 'STANDARD',
            //     Body: file, // 上传文件对象
            //     onProgress: function(progressData) {
            //         console.log(JSON.stringify(progressData));
            //     }
            // }, function(err, data) {
            //     console.log(err || data);
            // });
            // 读取文件URL

            // reader.readAsDataURL(file);
            // // 阅读文件完成后触发的事件
            // reader.onload = function () {
            //     // 读取的URL结果：this.result
            //     $("#avatar_img").attr("src", this.result);//avatar_img  img标签的ID
            // }

        })


    })












</script>




</body>
</html>